# 打刻一覧画面仕様

## 概要

登録された打刻データを一覧表示し、複数の条件でフィルタリングできる画面です。

## 画面パス

- **URL**: `/records`
- **ページコンポーネント**: `RecordsListPage.tsx`

## 機能仕様

### 1. データ表示

#### テーブル構造
| 列名 | データ型 | 説明 |
|-----|---------|------|
| ID | string | 打刻レコードID |
| User ID | string | ユーザーID |
| 日時 | datetime | 打刻日時（日本語形式） |
| 種別 | badge | 出勤/退勤のバッジ表示 |

#### データ表示形式
- **日時**: `YYYY/MM/DD HH:mm` 形式（例: 2026/01/10 09:00）
- **種別バッジ**:
  - 出勤: 緑背景（#dcfce7）
  - 退勤: 黄背景（#fef3c7）

#### データなし時
- **表示メッセージ**: "打刻データがありません"
- **表示位置**: テーブル内中央
- **スタイル**: グレーテキスト

### 2. フィルター機能

#### ユーザーID検索
- **項目名**: User ID
- **入力タイプ**: テキスト
- **検索方式**: 部分一致（大文字小文字区別なし）
- **プレースホルダー**: "Search by user ID"

#### 打刻種別フィルター
- **項目名**: 打刻種別
- **入力タイプ**: セレクトボックス
- **選択肢**:
  - すべて（all）
  - 出勤（clock-in）
  - 退勤（clock-out）
- **デフォルト**: すべて

#### 開始日時フィルター
- **項目名**: 開始日時
- **入力タイプ**: datetime-local
- **フィルター条件**: 指定日時以降のレコード

#### 終了日時フィルター
- **項目名**: 終了日時
- **入力タイプ**: datetime-local
- **フィルター条件**: 指定日時以前のレコード

### 3. 操作ボタン

#### 検索ボタン
- **ラベル**: 検索
- **スタイル**: プライマリーボタン（青）
- **動作**: 現在のフィルター条件で再検索
- **キーボードショートカット**: なし

#### リセットボタン
- **ラベル**: リセット
- **スタイル**: セカンダリーボタン（グレー）
- **動作**: 
  - 全フィルター条件をクリア
  - 全データを再取得
- **リセット対象**:
  - ユーザーID → 空文字
  - 打刻種別 → "すべて"
  - 開始日時 → 空
  - 終了日時 → 空

### 4. ナビゲーション

#### 打刻画面へのリンク
- **ラベル**: "← 打刻画面に戻る"
- **リンク先**: `/`
- **表示位置**: ページ最下部

## データフロー

### 初期ロード
1. コンポーネントマウント時に全データ取得
2. ローディング状態表示
3. データ取得完了後にテーブル表示

### フィルタリング
1. ユーザーがフィルター条件を入力
2. 「検索」ボタンをクリック
3. APIに条件を渡してフィルタリング済みデータ取得
4. テーブルを更新

### ソート
- **デフォルト**: 日時降順（新しい順）
- **固定**: ユーザーによるソート変更不可（現仕様）

## UI/UX設計

### レイアウト
- **最大幅**: 1200px
- **配置**: 画面中央
- **背景**: 白いカードスタイル
- **パディング**: 2rem

### フィルターセクション
- **レイアウト**: グリッドレイアウト（自動調整）
- **最小列幅**: 200px
- **背景**: 薄いグレー（#f8fafc）
- **パディング**: 1.5rem
- **ボーダー半径**: 4px

### テーブルスタイル
- **ヘッダー背景**: 薄いグレー（#f8fafc）
- **行ホバー**: 背景色変更（#f8fafc）
- **ボーダー**: 1px solid #e2e8f0
- **テキスト整列**: 左揃え

### レスポンシブ対応
- **テーブル**: 横スクロール可能
- **フィルター**: 画面幅に応じてカラム数調整
- **モバイル**: 1カラムレイアウト

## API連携

### データ取得エンドポイント
- **メソッド**: `mockApi.getRecords(filter?)`
- **フィルター型**: `RecordsFilter`
```typescript
interface RecordsFilter {
  userId?: string;
  startDate?: string;
  endDate?: string;
  type?: 'clock-in' | 'clock-out' | 'all';
}
```

### レスポンス型
```typescript
interface ClockRecord {
  id: string;
  userId: string;
  timestamp: string;
  type: 'clock-in' | 'clock-out';
}
```

### エラーハンドリング
- **ネットワークエラー**: コンソールにログ出力、空配列表示
- **データなし**: "打刻データがありません"メッセージ表示

## 状態管理

### State変数
- `records: ClockRecord[]` - 表示データ
- `loading: boolean` - データ取得中フラグ
- `filter: RecordsFilter` - 現在のフィルター条件

### 状態遷移
1. **初期ロード**: loading=true → データ取得 → loading=false
2. **フィルタリング**: loading=true → フィルタ適用 → loading=false
3. **リセット**: フィルターをクリア → 全データ再取得

## パフォーマンス考慮

### データ取得
- **タイミング**: 初期ロード時、検索ボタンクリック時のみ
- **キャッシュ**: なし（常に最新データ取得）
- **ページネーション**: 未実装（将来対応予定）

### フィルタリング
- **処理場所**: サーバーサイド（モックAPIで実装）
- **遅延実行**: なし（検索ボタントリガー）

## テストデータ

初期状態で以下の4件のレコードが表示されます:

| ID | ユーザーID | 日時 | 種別 |
|----|-----------|------|------|
| 1 | user001 | 2026/01/10 09:00 | 出勤 |
| 2 | user001 | 2026/01/10 18:00 | 退勤 |
| 3 | user002 | 2026/01/10 08:30 | 出勤 |
| 4 | user002 | 2026/01/10 17:30 | 退勤 |

## 関連ファイル

- `RecordsListPage.tsx` - コンポーネント本体
- `RecordsListPage.css` - スタイル定義
- `RecordsListPage.test.tsx` - 単体テスト（7テスト）
- `RecordsListPage.stories.tsx` - Storybookストーリー

## 今後の拡張予定

- [ ] ページネーション実装
- [ ] カラムソート機能
- [ ] CSVエクスポート機能
- [ ] データの編集・削除機能
- [ ] リアルタイム更新（WebSocket）
- [ ] 詳細表示モーダル
